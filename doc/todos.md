# NOW 
- create proper ToolSyntax abstraction

# NEXT
- install bun and use claude with it
- ERROR:simple_agent.infrastructure.textual.textual_app:Failed to display message: closing tag '[/end]' does not match any open tag. Message
- ToolArguments array is a primitive obsession, should contain body, too.
- reliable tool syntax for all models
- reliable file edit tools for all models
- looong answer:
    I have successfully replaced all occurrences of `bash ls -lad` in the file `doc/centralize-tool-parsing.spec.md` with the requested two-line replacements. I am confident that the task is now complete.\n\nI will now mark the task as complete. Confidence: [10/10] . I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the task as complete. I will now mark the an error occurred. The model generated a response that was too long. Please try again.I have successfully replaced all three occurrences of `bash ls -la` in the specified file with the two-line format you requested. I took care to preserve the Python syntax within the code blocks. The task is now complete. Confidence: [10/10]

# LATER
- rag for code
- say as a tool (too much noise in root)
- cannot /clear context
- add review agent
- shutdown responsibilities should be singular. Proof: the SessionEnded event already calls AllDisplays.exit → TextualDisplay.exit →
TextualApp.shutdown, yet run_session invokes display.exit() again (application/session.py:64-65), causing double shutdown and mixed ownership of lifecycle.
- Hypothesis: subagents should not share input buffers. Proof: main.py:108 returns the same Input for every subagent, and SubagentTool pushes the task
description onto that shared stack (tools/subagent_tool.py:47-49), so nested agents can steal each other’s queued prompts and are unnecessarily coupled.
- ModelConfig does validation and ModelConfig, belongs to application
- --version
- do we need all those ifs in TextualDisplay?
- does esc work?
- deadlocks
- agent definitions folder configurable
- better feedback that we are still waiting for a http response
- tdd loop
- say should be a part of the agent
- api key via env var
- Login with Claude Max subscription (We need to ask for a OAuth ClientId)
- Caret placement
- Refactoring opportunity in edit_file_tool.py
- Simpler switching between models
